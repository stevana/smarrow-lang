machine Counter where

state : Int = 0

language
  : Incr -> {}
  | Read -> Int

function i -> case i of
  { Incr -> do { i <- get -< {}; put -< i + 1 }
  ; Read -> get -< {}
  }